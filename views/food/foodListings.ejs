<%- include('../partials/header') %>
<header>
    <%- include('../partials/logo') %>
    <%- include('../partials/nav') %>
</header>

<main id="foodListings">
    <h3>Top Restaurants in <span style="text-transform:capitalize"><%= city %></span></h3>
        
    <% restaurants.forEach(rest => { %>
        <div class="restaurant">
            <div class="restImg">
                <img src="<%= rest.image_url %>">
            </div>
            <div class="restInfo">
                <div class="restInfoCol">
                    <p class="restName"><%= rest.name %></p>
                    <p class="restAddress"><%= rest.location.address1 %> <%= rest.location.address2 %></p>
                    <p class="restAddress"><%= rest.location.address3 %></p>
                    <p class="restAddress"><%= rest.location.city %>, <%= rest.location.state %> <%= rest.location.zip_code %></p>
                    <a href="tel:<%= rest.phone %>"><p class="restPhone"><%= rest.display_phone %></p></a>
                </div>
                <div class="restInfoCol">
                    <a href="/food/location=<%=city%>/price=<%= price %>/id=<%= rest.id %>"><button class="restBtn">Info</button></a>
                    <a href="/food/location=<%=city%>/price=<%= price %>/id=<%= rest.id %>"><button class="recBtn">Rec</button></a>
                    <div class="restRating">
                        <% const star = rest.rating %>
                        <% for(i=1; i<=star; i++) { %>
                            <img class="restRatingStars" src="/images/star.svg">
                        <% } %>
                    </div>
                    <% const meters = rest.distance %>
                    <% const miles = rest.distance * 0.00062 %>
                    <p><%= rest.price %> | <%= miles.toFixed(1) %> miles</p>  
                </div>
            </div>
        </div>
    <% }) %>

</main>

<%- include('../partials/footer') %>
